<ion-app>
  <ion-content [fullscreen]="true">
      <ion-card-header>
        <div class="header-content">
          <ion-card-title>
            GestEmployees
          </ion-card-title>
          
          <ion-button class=" text-deco-button" (click)="disconnect()">
            Déconnexion
          </ion-button>

          <ion-button class="svg-deco-button" (click)="disconnect()">
            <ion-img src="assets/logout-svgrepo-com.svg" class="logout-img"></ion-img>
          </ion-button>

        </div>
      </ion-card-header>

      <ion-card>
        <ion-searchbar class="employee-searchbar" [(ngModel)]="employeeToFind" (ionChange)="filterEmployees()" [disabled]="employees.length==0"></ion-searchbar>

        <ion-button class="button-add" (click)="toggleModalAdd()">
          +
        </ion-button>
      </ion-card>

    <ion-card>
      <ion-grid>
        <ion-row>
            <ion-col>Prénom</ion-col>
            <ion-col>Nom</ion-col>
            <ion-col>Email</ion-col>
        </ion-row>


        <div *ngFor="let employee of filteredEmployees" class="no-employee">
          <ion-row class="employee" >
              <ion-col>{{ employee.first_name }}</ion-col>
              <ion-col>{{ employee.last_name }}</ion-col>
              <ion-col>{{ employee.email }}</ion-col>
          </ion-row>

          <ion-row class="employee-info">
                <div >
                    <div class="text-buttons">
                      <ion-button (click)="setEmployeeToModify(employee)" class="text-modify-button">
                          Modifier
                      </ion-button>
      
                      <ion-button (click)="setEmployeeToDelete(employee.id)" class="text-delete-button">
                          Supprimer
                      </ion-button>
                    </div>

                    <div class="svg-buttons">
                      <ion-button (click)="setEmployeeToModify(employee)" class="svg-modify-button">
                        <ion-img src="assets/pen-svgrepo-com.svg" class="pen-img"></ion-img>
                      </ion-button>

                      <ion-button (click)="setEmployeeToDelete(employee.id)" class="svg-del-button">
                          <ion-img src="assets/trash-can-svgrepo-com.svg" class="trash-img"></ion-img>
                      </ion-button>
                    </div>
                </div>
          </ion-row>
        </div>
    </ion-grid>
    </ion-card>

    <div class="div-modal-add" [hidden]="!showModalAdd">
      <app-add-employee (refreshEmployees)="refreshEmployees()" (closeModal)="toggleModalAdd()"></app-add-employee>
    </div>

    <div class="div-modal-modify" [hidden]="!showModalModify">
      <app-modify-employee [employee]="employeeToModify" (closeModal)="toggleModalModify()" (refreshEmployees)="refreshEmployees()"></app-modify-employee>
    </div>
  </ion-content>

    <div [hidden]="!showModalDelete"  class="modal">
        <ion-label class="footer">Voulez-vous vraiment supprimer cet employé ?</ion-label>

        <ion-buttons>
          <ion-button class="modal-button-delete" (click)="deleteEmployee(employeeToDelete)">
            Oui
          </ion-button>

          <ion-button class="modal-button-cancel" (click)="toggleModalDelete()">
            Non
          </ion-button>
        </ion-buttons>
    </div>
</ion-app>